<button id="startRecording">Start Recording</button>
<button id="stopRecording">Stop Recording</button>
<script>
    const startRecording = document.getElementById("startRecording");
    const stopRecording = document.getElementById("stopRecording");

    let audioChunks = [];
    let mediaRecorder;

    startRecording.addEventListener("click", function () {
        navigator.mediaDevices
            .getUserMedia({ audio: true })
            .then(function (stream) {
                mediaRecorder = new MediaRecorder(stream);
                mediaRecorder.start();
                mediaRecorder.addEventListener("dataavailable", function (event) {
                    audioChunks.push(event.data);
                });
            });
    });

    stopRecording.addEventListener("click", function () {
        mediaRecorder.stop();
        const audioBlob = new Blob(audioChunks, { type: "audio/wav" });
        const formData = new FormData();
        formData.append("audio", audioBlob);
        const xhr = new XMLHttpRequest();
        xhr.open("POST", "/send-audio", true);
        xhr.send(formData);
    });
</script>