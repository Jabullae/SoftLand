<!DOCTYPE html>
<html>

<body>
    <button id="start-record" onclick="startRecording()" >Start Record</button>
    <button id="stop-record" onclick="stopRecording()" >Stop Record</button>
    <p>{{message}}</p>
<script>
   // Start recording the audio
    const startRecording = () => {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        mediaRecorder = new MediaRecorder(stream);

        const audioChunks = [];
        mediaRecorder.addEventListener("dataavailable", event => {
            audioChunks.push(event.data);
        });

        mediaRecorder.start();
    };

    // Stop recording the audio and send it to the server
    const stopRecording = async () => {
        mediaRecorder.stop();
        const audioBlob = new Blob(audioChunks);
        const audioFile = new File([audioBlob], "recorded-audio.wav", {
            type: "audio/wav"
        });

        const formData = new FormData();
        formData.append("audio", audioFile);

        const response = await fetch("http://localhost:5000/upload", {
            method: "POST",
            body: formData
        });

        const data = await response.json();
        console.log(data);
    };
</script>

</body>

</html>